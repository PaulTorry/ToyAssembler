<!doctype html>
<html lang="en">
<head>
  <meta charset="utf-8">
  <title>ToyAssembler</title>
  <meta name="description" content="Virtual simple machine code computer">
  <meta name="author" content="Paul Torrington & Noah">
<style>
  input[type=text] {
    padding: 0  0 0 10px;
    margin:0 5px ;
    width: 40px; 
  }
</style>
</head>

<body>
<h1>Simple Computer</h1>

<p id="demo"></p>
<div>
    <p>0.<input type="text" id="0A" value="0"><input type="text" id="0B" value="3"><span id="0out"></span></p>
    <p>1.<input type="text" id="1A" value="1"><input type="text" id="1B" value="0"><span id="1out"></span></p>
    <p>2.<input type="text" id="2A" value="0"><input type="text" id="2B" value="4"><span id="2out"></span></p>
    <p>3.<input type="text" id="3A" value="3"><input type="text" id="3B" value="0"><span id="3out"></span></p>
    <p>4.<input type="text" id="4A" value="6"><input type="text" id="4B" value=""><span id="4out"></span></p>
    <p>5.<input type="text" id="5A" value="8"><input type="text" id="5B" value="0"><span id="5out"></span></p>
    <p>6.<input type="text" id="6A" value=""><input type="text" id="6B" value=""><span id="6out"></span></p>
    <p>7.<input type="text" id="7A" value=""><input type="text" id="7B" value=""><span id="7out"></span></p>
    <p>8.<input type="text" id="8A" value=""><input type="text" id="8B" value=""><span id="8out"></span></p>
    <p>9.<input type="text" id="9A" value=""><input type="text" id="9B" value=""><span id="9out"></span></p>

    <p>  <button onclick="getDataAndRun()">Run</button>    Output: <span id="output">output</span></p>

   

    <p>Structure and operations</p>
    <table><tr><td>The computer is created with:</td><td><code>let _ = new simpleComputer()</code></td> </tr>
        <tr><td>And run with:</td><td><code>      _.run(code, debug)</code></td> </tr>
    </table>
    <table>
        <tr><th>Opcode</th><th>action    </th><th>Explanation</th><th></th></tr>
        <tr><td>0</td><td>acc = []       </td><td></td><td></td></tr>
        <tr><td>1</td><td>acc => mem[]    </td><td></td><td></td></tr>
        <tr><td>2</td><td>mem[] => acc  </td><td></td><td></td></tr>
        <tr><td>3</td><td>acc = acc + mem[]  </td><td></td><td></td></tr>
        <tr><td>4</td><td>acc = acc - mem[] </td><td></td><td></td></tr>
        <tr><td>5</td><td>if(acc=0) jump[]  </td><td></td><td></td></tr>
        <tr><td>6</td><td>print(acc)  </td><td></td><td></td></tr>
        <tr><td>7</td><td>*reserved* </td><td></td><td></td></tr>
        <tr><td>8</td><td>End and return </td><td></td><td></td></tr>
    </table>
    <br/>
    <table>
        <tr><td>Acc(umulator)</td></tr>
     <tr> <td>mem[0,1,2,3,4]</td></tr>
      <tr> <td>Instructions [[],[]]</td></tr>
      <tr><td>currentLine   </td></tr>
                      
    </table>


</div>
</body>
<script src="./machine.js"></script>
<script src="./assembler.js"></script>
<script>
let comp = new simpleComputer()

function getDataAndRun(){
    
    const numberOfEntryLines = 9
    instructions = []
    for (let i = 0; i < numberOfEntryLines ; i++) {
      //  console.log("n", document.getElementById((i) + 'A'))
         instructions.push([
            Number(document.getElementById((i) + 'A').value),
            Number(document.getElementById((i) + 'B').value)
        ])
        
    } 
    console.log(instructions);
    let result = comp.run(instructions, console.log)
    document.getElementById('output').innerHTML = result
}





// comp.run(
//     parseAssembler(
//     `  in 3 
//        to 0
//        in 4
//        add 0
//        prt
//        end 0
//           `
//     )
// , ()=>{})

</script>
</html>